-- Usage -- 
-- :NeoCodeium auth

return {
    "monkoose/neocodeium",
    event = "VeryLazy",
    opts = {
        server = {
            api_url = 'https://codeium.company.net/_route/api_server',
            portal_url = 'https://codeium.company.net',
        },
    },
    config = function()
        local neocodeium = require("neocodeium")
        neocodeium.setup({ 
            manual = true,
            ignore_filetypes = { "TelescopePrompt", "TelescopeResults" },
        })
        vim.api.nvim_create_autocmd("User", {
            pattern = "NeoCodeiumCompletionDisplayed",
            callback = function() require("cmp").abort() end
        })
        -- set up some sort of keymap to cycle and complete to trigger completion
        vim.keymap.set("i", "<A-e>", function() neocodeium.cycle_or_complete() end)
        -- make sure to have a mapping to accept a completion
        vim.keymap.set("i", "<A-f>", function() neocodeium.accept() end)
    end,
}